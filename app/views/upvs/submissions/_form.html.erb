<%= form_with model: @upvs_submission, url: upvs_submissions_new_path, id: :new_message, builder: AppFormBuilder do |f| %>
  <%= f.hidden_field :posp_id %>
  <%= f.hidden_field :posp_version %>
  <%= f.hidden_field :message_type %>
  <%= f.hidden_field :recipient_uri %>
  <%= f.hidden_field :sender_business_reference %>
  <%= f.hidden_field :recipient_business_reference %>
  <%= f.hidden_field :message_subject %>
  <%= f.hidden_field :form %>
  <%= f.hidden_field :attachments %>
  <%= f.hidden_field :token %>
  <%= f.hidden_field :callback_url %>

  <h1 class="govuk-heading-l">Podanie</h1>
  <p class="govuk-body-l">Pomocou tejto služby môžete zasielať správy orgánom verejnej moci.</p>

  <%= render 'components/error_summary', form: @upvs_submission %>
  <%= render partial: 'sender' %>

  <div class="govuk-form-group">
    <%= f.label :recipient_name, 'Príjimateľ správy', class: 'govuk-label' %>
    <%= f.text_field :recipient_name, disabled: true %>
    <div id="recipient-name-container"></div>
    <%= hidden_field_tag :recipient_name_default, @upvs_submission.recipient_name %>
    <%= f.hidden_field :recipient_uri %>
  </div>

  <iframe srcdoc="<%= raw @upvs_submission.form_visualisation %>"
          onload='(
            function(o) {
              o.style.height = 1.01 * o.contentWindow.document.body.scrollHeight + "px";
            }
            (this)
          );'
          style="height:200px;width:100%;border:none;overflow:hidden;">
  </iframe>

  <%= render partial: 'actions' %>
<% end %>
